gentoo notes
installation
$ sudo -i
$ cfdisk /dev/sda -z
$ mkdir --parents /mnt/gentoo && mkdir --parents /mnt/gentoo && mount /dev/sda3/mnt/gentoo && cd /mnt/gentoo && chronyd -q 
$ wget https://distfiles.gentoo.org/releases/amd64/autobuilds/20241006T144834Z/stage3-amd64-desktop-openrc-20241006T144834Z.tar.xz
$ tar xpvf stage3-*.tar.xz --xattrs-include='*.*' --numeric-owner
$ nano /mnt/gentoo/etc/portage/make.conf
# make.conf file
COMMON_FLAGS="-march=native -O2 -pipe"
CFLAGS="${COMMON_FLAGS}"
CXXFLAGS="${COMMON_FLAGS}"
MAKEOPTS="-j4 -l5"
FEATURES="${FEATURES} getbinpkg"
FEATURES="${FEATURES} binpkg-request-signature"
USE="-systemd"
VIDEO_CARDS="intel"
# file end
$ cp --dereference /etc/resolv.conf /mnt/gentoo/etc/ && arch-chroot /mnt/gentoo && mkdir /efi && mount /dev/sda1 /efi && emerge-webrsync
$ nano /etc/portage/binrepos.conf/gentoobinhost.conf
change priority to 9999
$ getuto && emerge --oneshot app-portage/cpuid2cpuflags && echo "*/* $(cpuid2cpuflags)" > /etc/portage/package.use/00cpu-flags && echo "Pacific/Auckland" > /etc/timezone && emerge --config sys-libs/timezone-data && env-update && source /etc/profile && export PS1="(chroot) ${PS1}"
nano /etc/portage/package.use/installkernel
add "sys-kernel/installkernel dracut" to file
$ emerge --ask --autounmask linux-firmware intel-microcode gentoo-kernel-bin 
$ dispatch-conf 
$ emerge --ask --autounmask linux-firmware intel-microcode gentoo-kernel-bin 
$ nano /etc/fstab
# file starts 
/dev/sda1   /efi        vfat    umask=0077     0 2
/dev/sda2   none         swap    sw                   0 0
/dev/sda3   /            xfs    defaults,noatime              0 1
#file ends
$ echo gentoo-thinkpad > /etc/hostname
$ passwd
$ nano /etc/portage/package.use/installkernel
add "sys-kernel/installkernel grub" to file
$ echo 'GRUB_PLATFORMS="efi-64"' >> /etc/portage/make.conf
$ emerge --ask app-admin/sysklogd sys-process/cronie sys-apps/mlocate app-shells/bash-completion net-misc/chrony sys-fs/xfsprogs net-misc/networkmanager app-admin/sudo sys-boot/grub
$ rc-update add sysklogd default && rc-update add cronie default && rc-update add sshd default && rc-update add elogind boot && rc-update add dbus boot && rc-update add chronyd default && rc-update add NetworkManager default
$ grub-install --efi-directory=/efi
$ grub-mkconfig -o /boot/grub/grub.cfg
$ nano /etc/sudoers
$ useradd zoe && usermod -aG wheel,audio,video,plugdev zoe
$ passwd zoe
uncomment line about group wheel
$ emerge --ask gui-libs/display-manager-init x11-misc/lightdm 
$ nano /etc/conf.d/display-manager
change display manager to prefered 
$ rc-update add display-manager default
add nm applet
$ emerge gnome-extra/nm-applet
