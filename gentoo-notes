gentoo linux notes 
$ mkfs.xfs /dev/sda3
$ mkfs.vfat -F 32 /dev/sda1 
$ mkswap /dev/sda2
$ swapon /dev/sda2
$ mkdir --parents /mnt/gentoo
$ mkdir --parents /mnt/gentoo/efi
$ mount /dev/sda3 /mnt/gentoo
$ wget https://distfiles.gentoo.org/releases/amd64/autobuilds/20241020T170324Z/stage3-amd64-desktop-openrc-20241020T170324Z.tar.xz
$ tar xpvf stage3-*.tar.xz --xattrs-include='*.*' --numeric-owner
$ nano /mnt/gentoo/etc/portage/make.conf
COMMON_FLAGS="-march=native -O2 -pipe"
CFLAGS="${COMMON_FLAGS}"
CXXFLAGS="${COMMON_FLAGS}"
FCFLAGS="${COMMON_FLAGS}"
FFLAGS="${COMMON_FLAGS}"
LC_MESSAGES=C.utf8
MAKEOPTS="-j3 -l4"
USE="-systemdâ€
VIDEO_CARDS="intel"
$ cp --dereference /etc/resolv.conf /mnt/gentoo/etc/
$ arch-chroot /mnt/gentoo
$ mount /dev/sda1 /efi
$ emerge-webrsync 
$ emerge --ask --oneshot app-portage/cpuid2cpuflags
$ echo "*/* $(cpuid2cpuflags)" > /etc/portage/package.use/00cpu-flags
$ ln -sf ../usr/share/zoneinfo/Pacific/Auckland /etc/localtime
$ nano /etc/locale.gen
$ locale-gen
$ eselect locale list 
$ eselect locale set 
$ env-update && source /etc/profile && export PS1="(chroot) ${PS1}"
$ echo "sys-kernel/installkernel dracut" >> /etc/portage/package.use/installkernel
$ emerge --ask --autounmask linux-firmware intel-microcode gentoo-kernel-bin
fstab
$ nano /etc/fstab
file start
/dev/sda1   /efi        vfat    umask=0077     0 2
/dev/sda2   none         swap    sw                   0 0
/dev/sda3   /            xfs    defaults,noatime              0 1
file end 
$ echo gentoo > /etc/hostname
-- on desktop
$ emerge --ask net-misc/dhcpcd
$ rc-update add dhcpcd default
-- on laptop 
$ emerge --ask net-misc/networkmanager 
$ rc-update add NetworkManager default 
$ passwd
$ echo "sys-kernel/installkernel grub" >> /etc/portage/package.use/installkernel
$ echo 'GRUB_PLATFORMS="efi-64"' >> /etc/portage/make.conf
$ emerge --ask --autounmask app-admin/sysklogd sys-process/cronie sys-apps/mlocate app-shells/bash-completion net-misc/chrony sys-fs/xfsprogs sys-boot/grub 
$ rc-update add sysklogd default ; rc-update add cronie default ; rc-update add sshd default ; rc-update add chronyd default ; rc-update add elogind boot ; rc-update add dbus default  
$ grub-install --efi-directory=/efi
$ grub-mkconfig -o /boot/grub/grub.cfg
